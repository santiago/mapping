{"ts":1348772236783,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"module.exports = function(app, options) {\n    \n    options = options || {};\n    \n    var resource = this.resource;\n    var name = this.name;\n    var store = this.store;\n    \n    function get(req, res, next) {\n        var query = (function() {\n    \t\tif (req.params.equipamiento_id) {\n\t\t\t\treturn {\n\t\t\t\t\t_id: req.params.equipamiento_id\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (req.query) {\n\t\t\t\treturn req.query;\n\t\t\t}\n\t\t\treturn null;\n\t\t})();\n\n\t\t// Find by Id\n\t\tif (query) {\n\t\t\tif (query._id) {\n\t\t\t\tEquipamiento.findOne(query, function(err, r) {\n\t\t\t\t\treq.equipamiento = r;\n\t\t\t\t\tnext();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tEquipamiento.find(query).sort({\n\t\t\t\t\tnombre: 'asc'\n\t\t\t\t}).exec(function(err, records) {\n\t\t\t\t\treq.equipamientos = records;\n\t\t\t\t\tnext();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n    }\n    \n    function post(req, res, next) {\n        next();\n    }\n    \n    function put(req, res, next) {\n        next();\n    }\n    \n    function del(req, res, next) {\n        next();\n    }\n    \n    app.get(resource, get, function(req, res) {\n    });\n    \n    app.get(resource+'/:mapping_id', get, function(req, res) {\n    });\n\n    app.post(resource, post, function(req, res) {\n    });\n    \n    app.post(resource+'/:mapping_id', put, function(req, res) {\n    });\n    \n    app.put(resource+'/:mapping_id', put, function(req, res) {\n    });\n    \n    app.del(resource+'/:mapping_id', del, function(req, res) {\n    });\n\n}"]],"start1":0,"start2":0,"length1":0,"length2":1357}]],"length":1357}
{"contributors":[],"silentsave":false,"ts":1348772309154,"patch":[[{"diffs":[[0,".store;\n"],[1,"    var name_id = name+'_id';\n"],[0,"    \n   "]],"start1":161,"start2":161,"length1":16,"length2":46},{"diffs":[[0,"q.params"],[-1,".equipamiento"],[1,"[name"],[0,"_id"],[1,"]"],[0,"\n\t\t\t\t}\n\t"]],"start1":338,"start2":338,"length1":32,"length2":25}]],"length":1380,"saved":false}
{"ts":1348772680931,"patch":[[{"diffs":[[0,"rams"],[-1,".equipamiento"],[1,"[name"],[0,"_id"],[1,"]"],[0,") {\n"]],"start1":289,"start2":289,"length1":24,"length2":17},{"diffs":[[0,"ery._id) {\n\t"],[-1,"\t\t\tEquipamiento"],[1,"            store"],[0,".findOne(que"]],"start1":472,"start2":472,"length1":39,"length2":41},{"diffs":[[0,"\t\t\t\t\treq"],[-1,".equipamiento"],[1,"[name]"],[0," = r;\n\t\t"]],"start1":536,"start2":536,"length1":29,"length2":22},{"diffs":[[0,"uery"],[-1,").sort({\n\t\t\t\t\tnombre: 'asc'\n\t\t\t\t}).exec("],[1,", "],[0,"func"]],"start1":615,"start2":615,"length1":48,"length2":10},{"diffs":[[0,"\treq"],[-1,".equipamientos"],[1,"[plural]"],[0," = r"]],"start1":650,"start2":650,"length1":22,"length2":16}]],"length":1324,"saved":false}
{"ts":1348772694157,"patch":[[{"diffs":[[0,"s.name;\n"],[1,"    var plural = name+'s';\n"],[0,"    var "]],"start1":133,"start2":133,"length1":16,"length2":43}]],"length":1351,"saved":false}
{"ts":1348772714051,"patch":[[{"diffs":[[0,"\t\t\t\t"],[-1,"Equipamiento"],[1,"store"],[0,".fin"]],"start1":619,"start2":619,"length1":20,"length2":13}]],"length":1344,"saved":false}
{"ts":1348774869727,"patch":[[{"diffs":[[0,"+'_id';\n"],[-1,"    "],[0,"\n    fun"]],"start1":218,"start2":218,"length1":20,"length2":16}]],"length":1340,"saved":false}
{"ts":1348774983891,"patch":[[{"diffs":[[0,"ions) {\n"],[-1,"    "],[0,""],[1,""],[0,"\n    opt"]],"start1":34,"start2":34,"length1":20,"length2":16},{"diffs":[[0," || {};\n"],[-1,"    "],[0,""],[1,""],[0,"\n    var"]],"start1":64,"start2":64,"length1":20,"length2":16},{"diffs":[[0,"l = name"],[-1,"+"],[1," + "],[0,"'s';\n   "]],"start1":146,"start2":146,"length1":17,"length2":19},{"diffs":[[0,"d = name"],[-1,"+"],[1," + "],[0,"'_id';\n\n"]],"start1":204,"start2":204,"length1":17,"length2":19},{"diffs":[[0,") {\n    "],[-1,"\t\t"],[1,"        "],[0,"if (req."]],"start1":288,"start2":288,"length1":18,"length2":24},{"diffs":[[0,") {\n"],[-1,"\t\t\t\treturn {\n\t\t\t\t\t_id: req.params[name_id]\n\t\t\t\t}\n\t\t\t}\n\t\t\t"],[1,"                return {\n                    _id: req.params[name_id]\n                }\n            }\n            "],[0,"if ("]],"start1":327,"start2":327,"length1":65,"length2":122},{"diffs":[[0,"uery) {\n"],[-1,"\t\t\t\t"],[1,"                "],[0,"return r"]],"start1":454,"start2":454,"length1":20,"length2":32},{"diffs":[[0,"ry;\n"],[-1,"\t\t\t}\n\t\t\treturn null;\n\t\t})();\n\n\t\t"],[1,"            }\n            return null;\n        })();\n\n        "],[0,"// F"]],"start1":492,"start2":492,"length1":40,"length2":70},{"diffs":[[0,"d by Id\n"],[-1,"\t\t"],[1,"        "],[0,"if (quer"]],"start1":564,"start2":564,"length1":18,"length2":24},{"diffs":[[0,"uery) {\n"],[-1,"\t\t\t"],[1,"            "],[0,"if (quer"]],"start1":585,"start2":585,"length1":19,"length2":28},{"diffs":[[0,"._id) {\n"],[-1,"\t"],[1,"    "],[0,"        "]],"start1":614,"start2":614,"length1":17,"length2":20},{"diffs":[[0,") {\n"],[-1,"\t\t\t\t\treq[name] = r;\n\t\t\t\t\tnext();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t"],[1,"                    req[name] = r;\n                    next();\n                });\n            }\n            else {\n                "],[0,"stor"]],"start1":674,"start2":674,"length1":68,"length2":140},{"diffs":[[0,"ords) {\n"],[-1,"\t\t\t\t\t"],[1,"                    "],[0,"req[plur"]],"start1":845,"start2":845,"length1":21,"length2":36},{"diffs":[[0,"ds;\n"],[-1,"\t\t\t\t\tnext();\n\t\t\t\t});\n\t\t\t}\n\t\t"],[1,"                    next();\n                });\n            }\n        "],[0,"}\n    }\n"],[-1,"    "],[0,""],[1,""],[0,"\n   "]],"start1":892,"start2":892,"length1":48,"length2":86},{"diffs":[[0,"next) {\n        "],[-1,"next("],[1,"var data = req.body;\n    \tvar model = new Equipamiento(data);\n\t\tmodel.save(function(err, r) {\n\t\t\tif (err) {\n\t\t\t\tres.send(500);\n\t\t\t}\n\t\t\treq.equipamiento = r;\n\t\t\tnext();\n\t\t}"],[0,");\n    }\n    \n  "]],"start1":1003,"start2":1003,"length1":37,"length2":203},{"diffs":[[0,"();\n\t\t});\n    }\n"],[-1,"    "],[0,""],[1,""],[0,"\n    function pu"]],"start1":1183,"start2":1183,"length1":36,"length2":32},{"diffs":[[0,"xt();\n    }\n"],[-1,"    "],[0,""],[1,""],[0,"\n    functio"]],"start1":1245,"start2":1245,"length1":28,"length2":24},{"diffs":[[0,";\n    }\n"],[-1,"    "],[0,"\n    app"]],"start1":1307,"start2":1307,"length1":20,"length2":16},{"diffs":[[0,"(req, res) {"],[-1,"\n    });\n    "],[1,"});\n"],[0,"\n    app.get"]],"start1":1351,"start2":1351,"length1":37,"length2":28},{"diffs":[[0,"app.get(resource"],[-1,"+"],[1," + "],[0,"'/:mapping_id', "]],"start1":1372,"start2":1372,"length1":33,"length2":35},{"diffs":[[0,"(req, res) {"],[-1,"\n    "],[0,"});\n\n    app"]],"start1":1420,"start2":1420,"length1":29,"length2":24},{"diffs":[[0,"(req, res) {"],[-1,"\n    });\n    "],[1,"});\n"],[0,"\n    app.pos"]],"start1":1474,"start2":1474,"length1":37,"length2":28},{"diffs":[[0,"pp.post(resource"],[-1,"+"],[1," + "],[0,"'/:mapping_id', "]],"start1":1496,"start2":1496,"length1":33,"length2":35},{"diffs":[[0,"(req, res) {"],[-1,"\n    });\n    "],[1,"});\n"],[0,"\n    app.put"]],"start1":1544,"start2":1544,"length1":37,"length2":28},{"diffs":[[0,"app.put(resource"],[-1,"+"],[1," + "],[0,"'/:mapping_id', "]],"start1":1565,"start2":1565,"length1":33,"length2":35},{"diffs":[[0,"s) {"],[-1,"\n    });\n    "],[1,"});\n"],[0,"\n   "]],"start1":1621,"start2":1621,"length1":21,"length2":12},{"diffs":[[0,"resource"],[-1,"+"],[1," + "],[0,"'/:mappi"]],"start1":1642,"start2":1642,"length1":17,"length2":19},{"diffs":[[0,", res) {"],[-1,"\n    "],[0,"});\n\n}"]],"start1":1686,"start2":1686,"length1":19,"length2":14}]],"length":1700,"saved":false}
{"ts":1348775018124,"patch":[[{"diffs":[[0,"new "],[-1,"Equipamiento"],[1,"store"],[0,"(dat"]],"start1":1057,"start2":1057,"length1":20,"length2":13},{"diffs":[[0,"\treq"],[-1,".equipamiento"],[1,"[name]"],[0," = r"]],"start1":1146,"start2":1146,"length1":21,"length2":14}]],"length":1686,"saved":false}
{"ts":1348775082151,"patch":[[{"diffs":[[0,"next) {\n        "],[-1,"next("],[1,"var data = req.body;\n    \tvar id = req.params.id;\n\n\t\tEquipamiento.findById(id, function(err, r) {\n\t\t\tfor(f in data) {\n\t\t\t\tr.set(f, data[f]);\n\t\t\t}\n\t\t\tr.save(next);\n\t\t}"],[0,");\n    }\n\n    fu"]],"start1":1213,"start2":1213,"length1":37,"length2":198}]],"length":1847,"saved":false}
{"ts":1348775246650,"patch":[[{"diffs":[[0,"rams"],[-1,"."],[1,"[name_"],[0,"id"],[1,"]"],[0,";\n\n\t\t"],[-1,"Equipamiento"],[1,"store"],[0,".fin"]],"start1":1270,"start2":1270,"length1":28,"length2":27},{"diffs":[[0,") {\n        "],[-1,"next("],[1,"var id = req.params.id;\n        Equipamiento.findByIdAndRemove(id, function(err, r) {\n            next();\n        }"],[0,");\n    }\n\n  "]],"start1":1435,"start2":1435,"length1":29,"length2":139}]],"length":1956,"saved":false}
{"ts":1348775269904,"patch":[[{"diffs":[[0,"s) {});\n"],[-1,"\n"],[0,"}"]],"start1":1946,"start2":1946,"length1":10,"length2":9}]],"length":1955,"saved":false}
{"ts":1348775325305,"patch":[[{"diffs":[[0,"tion(req, res) {"],[1,"\n    "],[0,"});\n\n    app.get"]],"start1":1603,"start2":1603,"length1":32,"length2":37},{"diffs":[[0,"tion(req, res) {"],[1,"\n    "],[0,"});\n\n    app.pos"]],"start1":1677,"start2":1677,"length1":32,"length2":37},{"diffs":[[0,"tion(req, res) {"],[1,"\n    "],[0,"});\n\n    app.pos"]],"start1":1736,"start2":1736,"length1":32,"length2":37},{"diffs":[[0,"tion(req, res) {"],[1,"\n    "],[0,"});\n\n    app.put"]],"start1":1811,"start2":1811,"length1":32,"length2":37},{"diffs":[[0,"(req, res) {"],[1,"\n    "],[0,"});\n\n    app"]],"start1":1889,"start2":1889,"length1":24,"length2":29},{"diffs":[[0,", res) {"],[1,"\n    "],[0,"});\n}"]],"start1":1967,"start2":1967,"length1":13,"length2":18}]],"length":1985,"saved":false}
{"ts":1348775412124,"patch":[[{"diffs":[[0,"ion(req, res) {\n"],[1,"        res.send(req[plural]); \n"],[0,"    });\n\n    app"]],"start1":1604,"start2":1604,"length1":32,"length2":64},{"diffs":[[0,"ion(req, res) {\n"],[1,"        res.send(req[name_id]);\n"],[0,"    });\n\n    app"]],"start1":1710,"start2":1710,"length1":32,"length2":64}]],"length":2049,"saved":false}
{"ts":1348775504884,"patch":[[{"diffs":[[0,"req, res) {\n    "],[-1,""],[0,""],[1,"    res.send(req[name_id]);\n    "],[0,"});\n\n    app.pos"]],"start1":1805,"start2":1805,"length1":32,"length2":64},{"diffs":[[0,"ion(req, res) {\n"],[1,"        res.send({ok: 1});\n"],[0,"    });\n\n    app"]],"start1":1908,"start2":1908,"length1":32,"length2":59},{"diffs":[[0,"ion(req, res) {\n"],[1,"        res.send({ok: 1});\n"],[0,"    });\n\n    app"]],"start1":2009,"start2":2009,"length1":32,"length2":59},{"diffs":[[0,"req, res) {\n"],[1,"        res.send({ok: 1});\n"],[0,"    });\n}"]],"start1":2114,"start2":2114,"length1":21,"length2":48}]],"length":2162,"saved":false}
{"ts":1348775534837,"patch":[[{"diffs":[[0,"rams"],[-1,"."],[1,"[name_"],[0,"id"],[1,"]"],[0,";\n  "]],"start1":1462,"start2":1462,"length1":11,"length2":17}]],"length":2168,"saved":false}
{"ts":1348775596669,"patch":[[{"diffs":[[0,"es.send(req[name"],[-1,"_id"],[0,"]);\n    });\n\n   "]],"start1":1741,"start2":1741,"length1":35,"length2":32},{"diffs":[[0,"req[name"],[-1,"_id"],[0,"]);\n    "]],"start1":1837,"start2":1837,"length1":19,"length2":16}]],"length":2162,"saved":false}
